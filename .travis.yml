language: node_js
node_js:
  # Note that the latest version (node) is handled by the coverage run,
  # included in the matrix below.
  - '14'
  - '13'
  - '12'
  - '11'
  - '10'
  - '9'
  - '8'
  - '7'
  - '6'
  - '5'
  - '4'
  - iojs
  - '3'
  - '2'
  - '1.8'
  - '1.0'
  - '0.12'
  - '0.11'
matrix:
  include:
    - node_js: node
      env:
        - AVRO_COVERAGE=1
before_script:
  - ./scripts/travis install
  # Versions of node <10 don't support the latest mocha.
  - node -e 'import(".").catch(() => {});' 2>/dev/null || npm i mocha@~7.1.0
  # Versions of node <8 require even older dependencies.
  - node -e 'const a = {}; const b = {...a};' 2>/dev/null || npm i mocha@~3.5.3 tmp@~0.0.33
script:
  - ./scripts/travis test
